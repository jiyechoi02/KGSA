{"ast":null,"code":"var _jsxFileName = \"/Users/jiyechoi/Desktop/KGSA_web/kgsa/frontend/src/components/pages/Announcements.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from 'react-router-dom';\nimport { getUser, getToken } from '../../services/LoginHelper';\nimport { useFetch } from \"../../services/UseAPIs\";\nimport { Row, Col, Modal, Alert } from 'react-bootstrap';\nimport { CustomContainer as Container } from '../CustomContainer';\nimport Editor from '../Editor';\nimport MyTable from \"../MyTable\";\nimport MyModal from '../MyModal';\nimport MySpinner from '../MySpinner';\nimport ViewPost from '../ViewPost';\nimport Comments from '../Comments';\nimport MyDiv from \"../MyDiv\";\nimport EditPost from \"../EditPost\";\nimport { url } from '../../services/config';\nimport { StyledButton as Button } from '../Styles';\nimport { RiArrowGoBackFill } from 'react-icons/ri';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst user = getUser();\nconst token = getToken();\nexport const AnncmntEditPost = () => {\n  _s();\n\n  const {\n    _id\n  } = useParams();\n  let data = null;\n  const {\n    response,\n    isLoading,\n    error\n  } = useFetch(`${url}notice/posts/${_id}`);\n  useEffect(() => {\n    if (response) {\n      if (response.success) {\n        data = {\n          title: response.data.title,\n          contents: response.data.contents,\n          username: response.data.username,\n          keys: response.data.keys\n        };\n      }\n    }\n  }, [response]);\n\n  const updataData = (dataToUpdate, dispatch) => {\n    var requestOptions = {\n      method: 'PUT',\n      body: dataToUpdate,\n      redirect: 'follow'\n    };\n    fetch(`${url}notice/edit/${_id}`, requestOptions).then(res => res.json()).then(res => {\n      if (res.success) {\n        dispatch({\n          type: \"success\",\n          value: true\n        });\n      } else dispatch({\n        type: \"fail\",\n        value: true\n      });\n    }).catch(error => dispatch({\n      type: \"fail\",\n      value: true\n    })).finally(() => {\n      dispatch({\n        type: \"loading\",\n        value: false\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Container, {\n      containerSize: \"myContainer--small\",\n      children: \"\\uACF5\\uC9C0 \\uC0AC\\uD56D\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(MySpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }, this) : /*#__PURE__*/_jsxDEV(MyDiv, {\n      children: [response && /*#__PURE__*/_jsxDEV(EditPost, {\n        onSubmit: updataData,\n        initialData: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 34\n      }, this), error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 29\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AnncmntEditPost, \"nALXCbloNjUMFJcEp+zIFqyNQVA=\", false, function () {\n  return [useParams, useFetch];\n});\n\n_c = AnncmntEditPost;\nexport const AnncmntNewPost = () => {\n  const data = {\n    username: user.username\n  };\n\n  const postData = (data, dispatch) => {\n    var requestOptions = {\n      method: 'POST',\n      body: data,\n      redirect: 'follow'\n    };\n    fetch(url + 'notice', requestOptions).then(res => res.json()).then(res => {\n      if (res.success) {\n        dispatch({\n          type: \"success\",\n          value: true\n        });\n      } else dispatch({\n        type: \"fail\",\n        value: true\n      });\n    }).catch(error => dispatch({\n      type: \"fail\",\n      value: true\n    })).finally(() => {\n      dispatch({\n        type: \"loading\",\n        value: false\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(MyDiv, {\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        containerSize: \"myContainer--small\",\n        children: \"\\uACF5\\uC9C0\\uC0AC\\uD56D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Editor, {\n        initialData: data,\n        onSubmit: postData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this);\n};\n_c2 = AnncmntNewPost;\nexport const AnncmntPostView = props => {\n  _s2();\n\n  const {\n    _id\n  } = useParams(); // get id,username params\n\n  const [isDeleted, setIsDeleted] = useState(false);\n  const [showConfirm, setShowConfirm] = useState(false);\n  const history = useHistory();\n  let data = null;\n  const {\n    response\n  } = useFetch(`${url}notice/posts/${_id}`);\n\n  if (response) {\n    if (response.success) data = response.data;\n  }\n\n  const handleGoBack = () => {\n    // go back to announcement page\n    history.push('/announcements');\n  };\n\n  const handleDelete = () => {\n    // handle when the post delete button clicked\n    setShowConfirm(true);\n  };\n\n  const handleUpdate = () => {\n    // go to the post update page \n    history.push(`/announcements/edit/${_id}/${user.username}`);\n  };\n\n  const deletePost = () => {\n    // delete post \n    var requestOptions = {\n      method: 'DELETE',\n      redirect: 'follow'\n    };\n    fetch(`${url}notice/${_id}/${user.username}`, requestOptions).then(res => res.json()).then(() => setIsDeleted(true)).catch(error => console.log('error', error));\n  };\n\n  useEffect(() => {\n    const updateViews = () => {\n      // update the number of views \n      var requestOptions = {\n        method: 'PUT',\n        redirect: 'follow'\n      };\n      fetch(`${url}notice/views/${_id}`, requestOptions).then(res => res.text()).catch(err => console.log('err', err));\n    };\n\n    updateViews();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: !data ? /*#__PURE__*/_jsxDEV(MySpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(MyDiv, {\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        containerSize: \"myContainer--small\",\n        children: \"\\uACF5\\uC9C0\\uC0AC\\uD56D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-between\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          lg: 5,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleGoBack,\n            children: [/*#__PURE__*/_jsxDEV(RiArrowGoBackFill, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 64\n            }, this), \" Back\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }, this), data && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(ViewPost, {\n            data: data,\n            handleDelete: handleDelete,\n            handleUpdate: handleUpdate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Comments, {\n            forumItem: \"notice\",\n            _id: _id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(Modal, {\n        show: showConfirm,\n        onHide: () => setShowConfirm(false),\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          style: {\n            background: \"#6A1010\"\n          },\n          closeButton: true,\n          children: \"KGSA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          style: {\n            textAlign: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"danger\",\n            children: \"Are you sure about that??\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: deletePost,\n            children: \"Confirm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setShowConfirm(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(MyModal, {\n        show: isDeleted,\n        handleOnClick: handleGoBack,\n        variant: \"success\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"The post has been deleted successfully\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 21\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 174,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(AnncmntPostView, \"WTgUcjieZnfUDbjxa1wukw3DXf0=\", false, function () {\n  return [useParams, useHistory, useFetch];\n});\n\n_c3 = AnncmntPostView;\nexport const Announcements = ({\n  simple\n}) => {\n  _s3();\n\n  const history = useHistory();\n  const {\n    response\n  } = useFetch(url + \"notice\");\n\n  const handleNewPostClick = () => {\n    history.push(`/announcements/post/${token}`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: !response ? /*#__PURE__*/_jsxDEV(MySpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 25\n    }, this) : /*#__PURE__*/_jsxDEV(MyDiv, {\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        containerSize: \"myContainer--small\",\n        children: \"\\uACF5\\uC9C0\\uC0AC\\uD56D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          xs: 1,\n          children: user && /*#__PURE__*/_jsxDEV(Button, {\n            margin: \"0px\",\n            onClick: handleNewPostClick,\n            disabled: !user.admin ? true : false,\n            children: \"Add\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 38\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: response && /*#__PURE__*/_jsxDEV(MyTable, {\n          simple: simple ? simple : false,\n          data: response.data,\n          url: \"announcements\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 222,\n    columnNumber: 9\n  }, this);\n};\n\n_s3(Announcements, \"J5AfQpghfN3CK/qBmNQZL19sK+g=\", false, function () {\n  return [useHistory, useFetch];\n});\n\n_c4 = Announcements;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"AnncmntEditPost\");\n$RefreshReg$(_c2, \"AnncmntNewPost\");\n$RefreshReg$(_c3, \"AnncmntPostView\");\n$RefreshReg$(_c4, \"Announcements\");","map":{"version":3,"sources":["/Users/jiyechoi/Desktop/KGSA_web/kgsa/frontend/src/components/pages/Announcements.js"],"names":["useEffect","useState","useHistory","useParams","getUser","getToken","useFetch","Row","Col","Modal","Alert","CustomContainer","Container","Editor","MyTable","MyModal","MySpinner","ViewPost","Comments","MyDiv","EditPost","url","StyledButton","Button","RiArrowGoBackFill","user","token","AnncmntEditPost","_id","data","response","isLoading","error","success","title","contents","username","keys","updataData","dataToUpdate","dispatch","requestOptions","method","body","redirect","fetch","then","res","json","type","value","catch","finally","AnncmntNewPost","postData","AnncmntPostView","props","isDeleted","setIsDeleted","showConfirm","setShowConfirm","history","handleGoBack","push","handleDelete","handleUpdate","deletePost","console","log","updateViews","text","err","background","textAlign","Announcements","simple","handleNewPostClick","admin"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport {useHistory,useParams} from 'react-router-dom';\nimport { getUser,getToken } from '../../services/LoginHelper';\nimport { useFetch } from \"../../services/UseAPIs\";\n\nimport {Row, Col,Modal,Alert} from 'react-bootstrap';\nimport {CustomContainer as Container} from '../CustomContainer'\n\nimport Editor from '../Editor';\nimport MyTable from \"../MyTable\";\nimport MyModal from '../MyModal';\nimport MySpinner from '../MySpinner';\nimport ViewPost from '../ViewPost';\nimport Comments from '../Comments';\nimport MyDiv from \"../MyDiv\";\nimport EditPost from \"../EditPost\";\n\nimport {url} from '../../services/config';\nimport {StyledButton as Button} from '../Styles';\nimport {RiArrowGoBackFill} from 'react-icons/ri';\n\nconst user = getUser();\nconst token = getToken();\n\nexport const AnncmntEditPost = ()=>{\n\n    const {_id} = useParams();\n    let data = null;\n    const {response, isLoading, error} = useFetch(`${url}notice/posts/${_id}`)\n\n    useEffect(()=>{\n        if(response){\n            if(response.success) {\n                data = { \n                    title : response.data.title,\n                    contents : response.data.contents,\n                    username : response.data.username,\n                    keys : response.data.keys\n                }\n            }\n        }\n    },[response])\n\n    const updataData = (dataToUpdate,dispatch) =>{\n\n        var requestOptions = {\n            method : 'PUT',\n            body : dataToUpdate,\n            redirect: 'follow'\n        };\n\n        fetch(`${url}notice/edit/${_id}`,requestOptions)\n        .then(res=>res.json())\n        .then(res=>{\n            if(res.success){\n                    dispatch({type:\"success\", value:true})\n            }\n            else dispatch({type:\"fail\", value:true})\n        })\n        .catch(error => dispatch({type:\"fail\", value:true}))\n        .finally(()=>{\n            dispatch({type:\"loading\", value:false})\n        })\n    }\n    \n    return (\n        <Container >\n            <Container containerSize=\"myContainer--small\">공지 사항</Container>\n            {isLoading? <MySpinner/> :\n                <MyDiv>\n                    {response && <EditPost onSubmit={updataData} initialData={data}/>}\n                    {error? <div>{error}</div>: null}\n                </MyDiv>\n            }\n        </Container>\n    )\n}\n\nexport const AnncmntNewPost = ()=>{\n    const data = {\n        username : user.username,\n    }\n\n    const postData = (data,dispatch)=>{\n\n        var requestOptions = {\n            method: 'POST', \n            body: data,\n            redirect: 'follow'\n        };\n        fetch(url+'notice', requestOptions)\n        .then(res=>res.json())\n        .then(res=>{\n            if(res.success){\n                    dispatch({type:\"success\", value:true})\n            }\n            else dispatch({type:\"fail\", value:true})\n        })\n        .catch(error => dispatch({type:\"fail\", value:true}))\n        .finally(()=>{\n            dispatch({type:\"loading\", value:false})\n        })\n        \n    }\n\n    return (\n        <Container>\n            <MyDiv>\n                <Container containerSize=\"myContainer--small\">공지사항</Container>\n                <Editor initialData={data} onSubmit={postData}/>\n            </MyDiv>\n        </Container>)\n}\n\nexport const AnncmntPostView = (props) =>{\n\n    const { _id } = useParams(); // get id,username params\n    const [isDeleted, setIsDeleted] = useState(false);\n    const [ showConfirm, setShowConfirm] = useState(false);\n    const history = useHistory();\n    let data = null;\n    const {response} = useFetch(`${url}notice/posts/${_id}`)\n\n    \n    if(response) {\n        if(response.success)\n            data = response.data\n    }\n\n    const handleGoBack = () =>{\n        // go back to announcement page\n        history.push('/announcements');\n    }\n    \n    const handleDelete = ()=>{\n        // handle when the post delete button clicked\n        setShowConfirm(true);\n    }   \n    \n    const handleUpdate =()=>{\n        // go to the post update page \n        history.push(`/announcements/edit/${_id}/${user.username}`);\n    }\n\n    const deletePost = ()=>{\n        // delete post \n        var requestOptions = {\n            method : 'DELETE',\n            redirect: 'follow'\n        };\n        fetch(`${url}notice/${_id}/${user.username}`,requestOptions)\n        .then(res => res.json())\n        .then(() => setIsDeleted(true))\n        .catch(error => console.log('error', error));\n    }\n\n    useEffect(()=>{\n        const updateViews = ()=>{\n            // update the number of views \n    \n            var requestOptions = {\n                method : 'PUT',\n                redirect: 'follow'\n            };\n    \n            fetch(`${url}notice/views/${_id}`,requestOptions)\n            .then(res=>res.text())\n            .catch(err=>console.log('err',err));\n        }\n        updateViews();        \n    },[])\n    \n    return(\n        <Container>\n            {!data? <MySpinner/> :\n                    <MyDiv>\n                        <Container containerSize=\"myContainer--small\">공지사항</Container>\n                        <Row className=\"justify-content-between\">\n                            <Col lg={5}>\n                                <Button onClick={handleGoBack}><RiArrowGoBackFill/> Back</Button>\n                            </Col>\n                        </Row>\n                        {data &&\n                            <>\n                                <Row>\n                                    <ViewPost data={data} handleDelete={handleDelete} handleUpdate={handleUpdate}/>\n                                </Row>\n                                <Row>\n                                    <Comments forumItem=\"notice\" _id={_id}/>\n                                </Row>\n                            </>\n                        }   \n                        <Modal show={showConfirm} onHide={()=>setShowConfirm(false)}>\n                            <Modal.Header style={{background:\"#6A1010\"}} closeButton>KGSA</Modal.Header>\n                            <Modal.Body style={{textAlign:\"center\"}}>\n                                <Alert variant='danger'>Are you sure about that??</Alert>\n                            </Modal.Body>\n                            <Modal.Footer>\n                                <Button onClick={deletePost}>Confirm</Button>\n                                <Button onClick={()=>setShowConfirm(false)}>Cancel</Button>\n                            </Modal.Footer>\n                        </Modal>\n                        <MyModal show={isDeleted} handleOnClick={handleGoBack} variant='success'>\n                            <p>The post has been deleted successfully</p>\n                        </MyModal>\n                    </MyDiv>\n                }\n        </Container>\n\n    )\n}\n\nexport const Announcements = ({simple})=>{\n    \n    const history = useHistory();\n    const {response} = useFetch(url+\"notice\")\n    const handleNewPostClick = ()=>{\n        history.push(`/announcements/post/${token}`)\n    }\n\n    return (\n        <Container>\n            {!response? <MySpinner/>  :\n                <MyDiv>\n                    <Container containerSize='myContainer--small'>\n                        공지사항\n                    </Container>\n                    <Row>\n                        <Col xs={1}>\n                            {user && <Button margin=\"0px\" onClick={handleNewPostClick} disabled={!user.admin? true:false}>Add</Button>}\n                        </Col>\n                    </Row>\n                    <Row>\n                        {response && <MyTable simple={simple? simple : false} data={response.data} url=\"announcements\"/>}\n                    </Row>\n                </MyDiv>\n\n            }                         \n        </Container>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}