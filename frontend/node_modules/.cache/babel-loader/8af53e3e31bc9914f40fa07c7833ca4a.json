{"ast":null,"code":"var _jsxFileName = \"/Users/jiyechoi/Desktop/KGSA_web/kgsa/frontend/src/components/pages/Gallery.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React, { useState, useEffect, useReducer } from 'react';\nimport '../../styles.css';\nimport { StyledButton as Button } from '../Styles';\nimport { Card, Col, Form, Row, Carousel, ListGroup, Alert } from 'react-bootstrap';\nimport { CustomContainer as Container } from '../CustomContainer';\nimport { getUser } from '../../services/LoginHelper';\nimport { initialData, reducer } from '../../services/AlertHelper';\nimport MyModal from '../MyModal';\nimport MySpinner from '../MySpinner';\nimport { checkAuth } from '../AuthButtons';\nimport { RiDeleteBin2Line, RiCheckboxMultipleBlankLine } from 'react-icons/ri';\nimport styled from 'styled-components';\nimport { useHistory, useParams } from 'react-router-dom';\nimport MyDiv from '../MyDiv';\nimport { url } from '../../services/config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst user = getUser();\nconst StyledP = styled.p`\n    color : black;\n    font-size : 13pt;\n    &:hover{\n        color : red;\n    }\n`;\n_c = StyledP;\nexport const GalleryNewPost = () => {\n  _s();\n\n  const [{\n    success,\n    fail,\n    loading\n  }, dispatch] = useReducer(reducer, initialData);\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n  const [inputKey, setInputKey] = useState(\"inputKey\");\n  const [inputFileKey, setInputFileKey] = useState(\"inputFileKey\");\n  const [data, setData] = useState({\n    name: \"\",\n    caption: \"\"\n  });\n\n  const handleFileChange = e => {\n    const files = e.target.files;\n\n    if (files.length > 10) {\n      console.log(\"Too many files\"); // replace it to Alert \n      // setInputFileKey(new Date()) //set a random key to reset the file form \n    }\n\n    for (let i = 0; i < files.length; i++) {\n      setUploadedFiles(prev => [...prev, files[i]]);\n    }\n\n    setInputFileKey(new Date());\n  };\n\n  const handleInputChange = e => {\n    setData({ ...data,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSumbit = e => {\n    e.preventDefault();\n    dispatch({\n      type: \"loading\",\n      value: true\n    });\n    var formData = new FormData();\n    formData.append(\"name\", data.name);\n    formData.append(\"caption\", data.caption);\n\n    for (let i = 0; i < uploadedFiles.length; i++) {\n      formData.append(\"imgCollection\", uploadedFiles[i]);\n    }\n\n    var requestOptions = {\n      method: 'POST',\n      body: formData\n    };\n    fetch(url + \"gallery\", requestOptions).then(response => response.json()).then(result => {\n      if (result.success) {\n        dispatch({\n          type: \"loading\",\n          value: false\n        });\n        dispatch({\n          type: \"success\",\n          value: true\n        });\n      } else dispatch({\n        type: \"fail\",\n        value: true\n      });\n    }).catch(error => dispatch({\n      type: \"fail\",\n      value: true\n    })).finally(() => {\n      dispatch({\n        type: \"loading\",\n        value: false\n      });\n    });\n  };\n\n  const handleSuccessClick = () => {\n    dispatch({\n      type: \"success\",\n      value: false\n    });\n    setInputFileKey(new Date());\n    setInputKey(new Date());\n  };\n\n  const renderUploadedFilesList = () => {\n    const list = uploadedFiles.map((item, i) => {\n      console.log(item);\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        style: {\n          fontSize: '10pt'\n        },\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: 10,\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 2,\n            children: /*#__PURE__*/_jsxDEV(StyledP, {\n              onClick: () => handleDeleteUploadFiles(i),\n              children: /*#__PURE__*/_jsxDEV(RiDeleteBin2Line, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 79\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this);\n    });\n    return list;\n  };\n\n  const handleDeleteUploadFiles = index => {\n    setUploadedFiles(uploadedFiles.filter((item, i) => i !== index));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(MyDiv, {\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        containerSize: \"myContainer--small\",\n        children: \"\\uAC24\\uB7EC\\uB9AC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: handleSumbit,\n        className: \"editor-form\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"editor-form-control\",\n          type: \"text\",\n          name: \"name\",\n          placeholder: \"Title\",\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"editor-form-control\",\n          type: \"file\",\n          multiple: true,\n          onChange: handleFileChange,\n          accept: \"image/jpg, image/jpeg, image/png, image/gif, image/bmp\"\n        }, inputFileKey, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this), uploadedFiles && /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: renderUploadedFilesList()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"editor-form-control\",\n          as: \"textarea\",\n          name: \"caption\",\n          placeholder: \"Caption\",\n          onChange: handleInputChange,\n          rows: 3\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          margin: \"0px\",\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this)]\n      }, inputKey, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MyModal, {\n        show: loading,\n        closeButton: false,\n        children: /*#__PURE__*/_jsxDEV(MySpinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MyModal, {\n        show: success,\n        handleOnClick: handleSuccessClick,\n        variant: \"success\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"uploaded images successfully!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MyModal, {\n        show: fail,\n        handleOnClick: () => dispatch({\n          type: \"fail\",\n          value: false\n        }),\n        variant: \"danger\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Opps, something is wrong.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Try Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 9\n  }, this);\n};\n\n_s(GalleryNewPost, \"VCgQZYkUg6v8iDz7B94NddEsXgs=\");\n\n_c2 = GalleryNewPost;\nconst StyledCard = styled(Card)`\nwidth: 18rem;\n&:hover{\n    transform: scale(0.97); \n}\n`;\n_c3 = StyledCard;\nexport const GalleryView = props => {\n  _s2();\n\n  const data = props.location.state.data; // const {_id} = useParams();\n\n  const [deleted, setDeleted] = useState(false);\n  const history = useHistory();\n  let srcs = [];\n  useEffect(() => {\n    if (data) srcs = data.imgCollection.urls;\n  }, [data]);\n\n  const handleDelete = () => {\n    const keys = data.imgCollection.keys;\n    var myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    var requestOptions = {\n      method: 'DELETE',\n      redirect: 'follow',\n      headers: myHeaders,\n      body: JSON.stringify({\n        keys: keys\n      })\n    };\n    fetch(`${url}gallery/${data._id}`, requestOptions).then(res => res.json()).then(res => {\n      if (res.success) setDeleted(true);else console.log(res);\n    }).catch(err => console.log('err', err));\n  };\n\n  const handleUpdate = () => {};\n\n  const handleDeleteModalClose = () => {\n    setDeleted(false);\n    history.push('/gallery');\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [data ? /*#__PURE__*/_jsxDEV(MyDiv, {\n      breakPoint: 8,\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        containerSize: \"myContainer--small\",\n        children: \"\\uAC24\\uB7EC\\uB9AC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n        variant: \"secondary\",\n        children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n          variant: \"secondary\",\n          style: {\n            textAlign: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              xs: 9,\n              style: {\n                textAlign: 'start'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: data.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              xs: 3,\n              children: /*#__PURE__*/_jsxDEV(Row, {\n                children: checkAuth(\"\", handleDelete, handleUpdate)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n          style: {\n            fontSize: \"10pt\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Views : 10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 38\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Date:\", data.createdAt]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 38\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n          style: {\n            textAlign: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Carousel, {\n            children: srcs.map((item, i) => {\n              return /*#__PURE__*/_jsxDEV(Carousel.Item, {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item,\n                  alt: \"Error\",\n                  width: \"80%\",\n                  height: \"80%\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 45\n                }, this)\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 41\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: data.caption\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 17\n    }, this) : null, /*#__PURE__*/_jsxDEV(MyModal, {\n      show: deleted,\n      handleOnClick: handleDeleteModalClose,\n      variant: \"success\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"The Post has been deleted successfully. \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(GalleryView, \"b7ZoeTeEaBgaewJ6a8Pya8AMYXo=\", false, function () {\n  return [useHistory];\n});\n\n_c4 = GalleryView;\n\nconst Gallery = () => {\n  _s3();\n\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const [album, setAlbum] = useState([]);\n  const [{\n    success,\n    fail,\n    loading\n  }, dispatch] = useReducer(reducer, initialData);\n  const history = useHistory();\n  useEffect(() => {\n    let unsubscribe = false;\n\n    const fetchData = () => {\n      if (unsubscribe) return;\n      dispatch({\n        type: \"loading\",\n        value: true\n      });\n      var requestOptions = {\n        method: 'GET',\n        redirect: 'follow'\n      };\n      fetch(url + 'gallery', requestOptions).then(res => res.json()).then(res => {\n        // console.log(res)\n        if (res.success) {\n          // const data = res.data;\n          // for(let i = 0; i<data.length; i++){\n          //     const obj = data[i];\n          //     const imgCollection = obj.imgCollection;\n          //     for(let j = 0; j<imgCollection.length; j++){\n          //         const newObjct = {\n          //             name: obj.name,\n          //             caption: obj.caption,\n          //             src : obj.imgCollection[j]\n          //         }\n          //         setAlbum([...album, newObjct])\n          //     }\n          // }\n          setAlbum(res.data);\n          dispatch({\n            type: 'success',\n            value: true\n          });\n        } else {\n          dispatch({\n            type: 'fail',\n            value: true\n          });\n        }\n      }).catch(e => dispatch({\n        type: 'fail',\n        value: true\n      })); // .finally(()=>{\n      //     dispatch({type:\"loading\", value:false})\n      // })\n    };\n\n    fetchData();\n    return () => {\n      unsubscribe = true;\n    };\n  }, []);\n\n  const handleCardClick = item => {\n    history.push({\n      pathname: `/gallery/view/${item._id}`,\n      state: {\n        data: item\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(MyDiv, {\n      breakPoint: 11,\n      children: loading ? /*#__PURE__*/_jsxDEV(MySpinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 31\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Container, {\n          containerSize: \"myContainer--small\",\n          children: \"\\uAC24\\uB7EC\\uB9AC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 25\n        }, this), user && user.admin && /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => history.push(`/gallery/post/${user.username}`),\n          children: \"New Photos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 29\n        }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexFlow: 'row wrap'\n          },\n          children: album.map((item, i) => {\n            return /*#__PURE__*/_jsxDEV(StyledCard, {\n              border: \"light\",\n              onClick: () => handleCardClick(item),\n              children: [/*#__PURE__*/_jsxDEV(Card.Img, {\n                variant: \"top\",\n                src: item.imgCollection.urls[0],\n                style: {\n                  width: \"18rem\",\n                  height: \"300px\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                  style: {\n                    fontSize: '14pt'\n                  },\n                  children: [item.name, item.imgCollection.length >= 2 ? /*#__PURE__*/_jsxDEV(RiCheckboxMultipleBlankLine, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 85\n                  }, this) : null]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                  style: {\n                    fontSize: '10pt'\n                  },\n                  children: item.caption\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(Card.Footer, {\n                style: {\n                  fontSize: '8pt'\n                },\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: \"photo by : \\uCD5C\\uC9C0\\uC608\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 330,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: \"date : 8/21/2021\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 333,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 45\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 41\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 29\n        }, this), fail && /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"danger\",\n          style: {\n            textAlign: \"center\"\n          },\n          children: \"Sorry, something is wrong..Try it again later\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 17\n    }, this), showUploadModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => setShowUploadModal(false),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(GalleryNewPost, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 307,\n    columnNumber: 9\n  }, this);\n};\n\n_s3(Gallery, \"imFB1K7hiHTSoT/2OmD4yw30Ntc=\", false, function () {\n  return [useHistory];\n});\n\n_c5 = Gallery;\nexport default Gallery;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"StyledP\");\n$RefreshReg$(_c2, \"GalleryNewPost\");\n$RefreshReg$(_c3, \"StyledCard\");\n$RefreshReg$(_c4, \"GalleryView\");\n$RefreshReg$(_c5, \"Gallery\");","map":{"version":3,"sources":["/Users/jiyechoi/Desktop/KGSA_web/kgsa/frontend/src/components/pages/Gallery.js"],"names":["React","useState","useEffect","useReducer","StyledButton","Button","Card","Col","Form","Row","Carousel","ListGroup","Alert","CustomContainer","Container","getUser","initialData","reducer","MyModal","MySpinner","checkAuth","RiDeleteBin2Line","RiCheckboxMultipleBlankLine","styled","useHistory","useParams","MyDiv","url","user","StyledP","p","GalleryNewPost","success","fail","loading","dispatch","uploadedFiles","setUploadedFiles","inputKey","setInputKey","inputFileKey","setInputFileKey","data","setData","name","caption","handleFileChange","e","files","target","length","console","log","i","prev","Date","handleInputChange","value","handleSumbit","preventDefault","type","formData","FormData","append","requestOptions","method","body","fetch","then","response","json","result","catch","error","finally","handleSuccessClick","renderUploadedFilesList","list","map","item","fontSize","handleDeleteUploadFiles","index","filter","StyledCard","GalleryView","props","location","state","deleted","setDeleted","history","srcs","imgCollection","urls","handleDelete","keys","myHeaders","Headers","redirect","headers","JSON","stringify","_id","res","err","handleUpdate","handleDeleteModalClose","push","textAlign","createdAt","Gallery","showUploadModal","setShowUploadModal","album","setAlbum","unsubscribe","fetchData","handleCardClick","pathname","admin","username","display","flexFlow","width","height"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useReducer} from 'react'\nimport '../../styles.css';\nimport { StyledButton as Button } from '../Styles';\nimport { Card, Col, Form, Row,Carousel, ListGroup, Alert} from 'react-bootstrap';\nimport { CustomContainer as Container } from '../CustomContainer' ;\nimport { getUser } from '../../services/LoginHelper';\nimport { initialData, reducer } from '../../services/AlertHelper';\nimport MyModal from '../MyModal';\nimport MySpinner from '../MySpinner';\nimport { checkAuth } from '../AuthButtons';\nimport {RiDeleteBin2Line,RiCheckboxMultipleBlankLine} from 'react-icons/ri';\nimport styled from 'styled-components';\nimport { useHistory, useParams } from 'react-router-dom';\nimport MyDiv from '../MyDiv';\nimport {url} from '../../services/config';\n\nconst user = getUser();\n\nconst StyledP = styled.p`\n    color : black;\n    font-size : 13pt;\n    &:hover{\n        color : red;\n    }\n`\n\nexport const GalleryNewPost = () =>{\n    const [{success, fail,loading}, dispatch] = useReducer(reducer,initialData)\n\n    const [uploadedFiles, setUploadedFiles] = useState([])\n    const [inputKey, setInputKey]= useState(\"inputKey\")\n    const [ inputFileKey, setInputFileKey] = useState(\"inputFileKey\");\n    const [ data, setData] = useState({\n        name : \"\",\n        caption : \"\",\n    });\n\n    const handleFileChange = (e)=>{\n        const files = e.target.files\n        if(files.length> 10){\n            console.log(\"Too many files\") // replace it to Alert \n            // setInputFileKey(new Date()) //set a random key to reset the file form \n        }\n\n        for(let i =0; i<files.length; i++){\n            setUploadedFiles(prev=> [...prev, files[i]])\n        }\n\n        setInputFileKey(new Date())\n    }\n\n    const handleInputChange = (e)=>{\n        setData({...data, [e.target.name] : e.target.value})\n    }\n\n    const handleSumbit = (e) => {\n        e.preventDefault();\n        dispatch({type:\"loading\", value : true})\n        \n        var formData = new FormData();\n        formData.append(\"name\", data.name);\n        formData.append(\"caption\", data.caption);\n\n        for (let i =0; i< uploadedFiles.length; i ++){\n            formData.append(\"imgCollection\", uploadedFiles[i]);\n        }\n \n        var requestOptions = {\n            method: 'POST', \n            body: formData,\n        };\n\n        fetch(url+\"gallery\", requestOptions)\n            .then(response => response.json())\n            .then(result => {\n                if(result.success){\n                    dispatch({type:\"loading\", value:false})\n                    dispatch({type:\"success\", value:true})\n                }\n                else dispatch({type:\"fail\", value:true})\n            })\n            .catch(error => dispatch({type:\"fail\", value:true}))\n            .finally(()=>{\n                dispatch({type:\"loading\", value:false})\n            })\n    }\n\n    const handleSuccessClick = ()=>{\n        dispatch({type:\"success\", value:false})\n        setInputFileKey(new Date())\n        setInputKey(new Date())\n    }\n    \n    const renderUploadedFilesList = ()=>{\n        const list = uploadedFiles.map((item,i)=>{\n            console.log(item)\n            return (\n                <li key={i} style={{fontSize:'10pt'}}>\n                    <Row>\n                        <Col xs={10}>\n                            {item.name}\n                        </Col>\n                        <Col xs={2}>\n                            <StyledP onClick={()=>handleDeleteUploadFiles(i)}><RiDeleteBin2Line/></StyledP>\n                        </Col>\n                    </Row>\n                </li>\n            )\n        })\n\n        return list\n    }\n\n    const handleDeleteUploadFiles = (index)=>{\n        setUploadedFiles(uploadedFiles.filter((item,i)=> i!== index));\n    }\n    return (\n        <Container>\n            <MyDiv>\n                <Container containerSize=\"myContainer--small\">갤러리</Container>\n                <Form onSubmit={handleSumbit} className=\"editor-form\"  key={inputKey}>\n                    <Form.Control className=\"editor-form-control\"  type=\"text\" name=\"name\" placeholder=\"Title\" onChange={handleInputChange}/>            \n                    <Form.Control className=\"editor-form-control\"  type=\"file\" multiple onChange={handleFileChange} key={inputFileKey} accept=\"image/jpg, image/jpeg, image/png, image/gif, image/bmp\"/>  \n                    {uploadedFiles && \n                        <ul>\n                            {renderUploadedFilesList()}\n                        </ul>\n                    }\n                    <Form.Control className=\"editor-form-control\" as=\"textarea\" name=\"caption\" placeholder=\"Caption\" onChange={handleInputChange} rows={3}/>\n                    <Button margin=\"0px\" type=\"submit\">Submit</Button>\n                </Form>\n                <MyModal show={loading} closeButton={false}>\n                    <MySpinner/>\n                </MyModal>\n                <MyModal show={success} handleOnClick={handleSuccessClick} variant='success'>\n                    <p>uploaded images successfully!</p>\n                </MyModal>\n                <MyModal show={fail} handleOnClick={()=>dispatch({type:\"fail\", value: false})} variant='danger'>\n                    <p>Opps, something is wrong.</p>\n                    <p>Try Again</p>\n                </MyModal>\n            </MyDiv>\n        </Container>\n    )\n}\n\nconst StyledCard = styled(Card)`\nwidth: 18rem;\n&:hover{\n    transform: scale(0.97); \n}\n`\n\n\nexport const GalleryView = (props)=>{\n    const data = props.location.state.data\n    // const {_id} = useParams();\n    const [deleted, setDeleted] = useState(false)\n    const history = useHistory()\n    let srcs = []\n\n    useEffect(()=>{\n        if(data) srcs = data.imgCollection.urls\n    },[data])\n\n    const handleDelete = ()=>{\n        const keys = data.imgCollection.keys\n        var myHeaders = new Headers();\n        myHeaders.append(\"Content-Type\", \"application/json\");\n        \n        var requestOptions = {\n            method : 'DELETE',\n            redirect: 'follow',\n            headers : myHeaders,\n            body : JSON.stringify({keys : keys})\n        };\n\n        fetch(`${url}gallery/${data._id}`,requestOptions)\n        .then(res=>res.json())\n        .then(res=>{\n            if(res.success) setDeleted(true)\n            else console.log(res)\n        })\n        .catch(err=>console.log('err',err));\n    }   \n    const handleUpdate = ()=>{\n\n    }\n\n    const handleDeleteModalClose = ()=>{\n        setDeleted(false)\n        history.push('/gallery');\n    }\n\n    return (\n        <Container>\n            {data? \n                <MyDiv breakPoint={8}>\n                    <Container containerSize=\"myContainer--small\">갤러리</Container>\n                    <ListGroup variant=\"secondary\">\n                        <ListGroup.Item variant=\"secondary\" style={{textAlign:\"center\"}}>\n                            <Row>\n                                <Col xs={9} style={{textAlign:'start'}}>\n                                    <p>{data.name}</p>\n                                </Col>\n                                <Col xs={3}>\n                                    <Row>\n                                        {checkAuth(\"\",handleDelete,handleUpdate)}\n                                    </Row>\n                                </Col>\n                            </Row>\n                        </ListGroup.Item>\n                        <ListGroup.Item style={{fontSize:\"10pt\"}}>\n                            <Row>\n                                <Col><p>Views : 10</p></Col>\n                                <Col><p>Date:{data.createdAt}</p></Col>\n                            </Row>\n                        </ListGroup.Item>\n                        <ListGroup.Item style={{textAlign:\"center\"}}>\n                            <Carousel>\n                                {srcs.map((item,i)=>{\n                                    return(\n                                        <Carousel.Item key={i}>\n                                            <img src={item} alt=\"Error\" width=\"80%\" height=\"80%\"/>\n                                        </Carousel.Item>\n                                    )\n                                })}\n                            </Carousel>\n                        </ListGroup.Item>\n                        <ListGroup.Item>\n                            <p>{data.caption}</p>\n                        </ListGroup.Item>\n                    </ListGroup> \n                </MyDiv>\n            :null}\n            <MyModal show={deleted} handleOnClick={handleDeleteModalClose} variant='success'>\n                <p>The Post has been deleted successfully. </p>\n            </MyModal>\n        </Container>\n    )\n\n}\nconst Gallery = () =>{\n    const [showUploadModal, setShowUploadModal] = useState(false)\n    const [album, setAlbum] = useState([])\n    const [{success, fail,loading},dispatch] = useReducer(reducer,initialData)\n    const history = useHistory()\n\n    useEffect(()=>{\n        let unsubscribe = false;\n\n        const fetchData = ()=>{\n            if(unsubscribe) return;\n\n            dispatch({type:\"loading\", value:true})\n            var requestOptions = {\n                method: 'GET',\n                redirect: 'follow'\n              };\n            \n            fetch(url+'gallery',requestOptions)\n            .then(res=>res.json())\n            .then(res=>{\n                // console.log(res)\n                if(res.success){\n                    // const data = res.data;\n                    // for(let i = 0; i<data.length; i++){\n                    //     const obj = data[i];\n                    //     const imgCollection = obj.imgCollection;\n                    //     for(let j = 0; j<imgCollection.length; j++){\n                    //         const newObjct = {\n                    //             name: obj.name,\n                    //             caption: obj.caption,\n                    //             src : obj.imgCollection[j]\n                    //         }\n                    //         setAlbum([...album, newObjct])\n                    //     }\n                    // }\n                    setAlbum(res.data)\n                    dispatch({type:'success', value:true})\n                }else{\n                    dispatch({type:'fail', value:true})\n\n                }\n            })\n            .catch(e=>dispatch({type:'fail', value:true})\n            )\n            // .finally(()=>{\n            //     dispatch({type:\"loading\", value:false})\n            // })\n            \n        }\n        fetchData()\n\n        return ()=>{\n            unsubscribe = true;\n        }\n    },[])\n\n    const handleCardClick =(item)=>{\n        history.push({\n            pathname: `/gallery/view/${item._id}`,\n            state: { data: item }\n        })\n    }\n    return (\n        <Container>\n            {/* <Container containerSize=\"myContainer--medium\"> */}\n                <MyDiv breakPoint={11}>\n                    {loading? <MySpinner/> :\n                    <>  \n                        <Container containerSize=\"myContainer--small\">갤러리</Container>\n                        {user && user.admin &&                 \n                            <Button onClick={()=>history.push(`/gallery/post/${user.username}`)}>New Photos</Button>}\n                        {success && \n                            <div style={{display:'flex',flexFlow: 'row wrap' }}>\n                                {album.map((item,i)=>{\n                                    return (\n                                        <StyledCard key={i} border=\"light\" onClick={()=>handleCardClick(item)}>\n                                            <Card.Img variant=\"top\" src={item.imgCollection.urls[0]} style={{width:\"18rem\" ,height:\"300px\"}}/>\n                                            <Card.Body>\n                                                <Card.Title style={{fontSize:'14pt'}}>\n                                                    {item.name}\n                                                    {item.imgCollection.length >=2? <RiCheckboxMultipleBlankLine/> : null }\n                                                </Card.Title>\n                                                <Card.Text style={{fontSize:'10pt'}}>{item.caption}</Card.Text>\n                                            </Card.Body>\n                                            <Card.Footer style={{fontSize:'8pt'}}>\n                                                <Row>\n                                                    <Col>\n                                                        photo by : 최지예\n                                                    </Col>\n                                                    <Col>\n                                                        date : 8/21/2021\n                                                    </Col>\n                                                </Row>\n                                            </Card.Footer>\n                                        </StyledCard>\n                                    )\n                                })}\n                            </div>\n                        }   \n                        {fail && \n                            <Alert variant=\"danger\" style={{textAlign:\"center\"}}>Sorry, something is wrong..Try it again later</Alert>\n                        }\n                    </>\n                    }\n                </MyDiv>\n                {showUploadModal && \n                <div>\n                    <Button onClick={()=>setShowUploadModal(false)}>Cancel</Button>\n                    <GalleryNewPost/>\n                </div>}\n            {/* </Container> */}\n        </Container>\n    )\n};\n\nexport default Gallery;"]},"metadata":{},"sourceType":"module"}