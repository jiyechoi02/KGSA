{"ast":null,"code":"var _jsxFileName = \"/Users/jiyechoi/Desktop/KGSA_web/kgsa/frontend/src/components/pages/SignUp.js\",\n    _s = $RefreshSig$();\n\nimport { useReducer } from 'react';\nimport { useHistory } from 'react-router';\nimport { CustomContainer as Container } from '../CustomContainer';\nimport MyModal from '../MyModal';\nimport AccountForm from '../AccountForm';\nimport { initialData, reducer } from '../../services/AlertHelper';\nimport { useFetch } from '../../services/UseAPIs';\nimport { url } from '../../services/config';\nimport MyDiv from '../MyDiv';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SignUp = () => {\n  _s();\n\n  const fetchData = useFetch();\n  const [{\n    success,\n    fail,\n    loading\n  }, dispatch] = useReducer(reducer, initialData);\n  const user = {\n    firstname: \"\",\n    lastname: \"\",\n    username: \"\",\n    password: \"\",\n    email: \"\",\n    phone_number: null,\n    major: \"\"\n  };\n  const history = useHistory();\n\n  const handleCloseMyModal = () => {\n    if (success) {\n      history.push('/login');\n    }\n\n    dispatch({\n      type: 'success',\n      value: false\n    });\n    dispatch({\n      type: 'fail',\n      value: false\n    });\n  };\n\n  const createUser = async user => {\n    dispatch({\n      type: 'loading',\n      value: true\n    });\n    var myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    var requestOptions = {\n      method: 'POST',\n      headers: myHeaders,\n      body: JSON.stringify(user),\n      redirect: 'follow'\n    };\n    fetch(url + 'signup', requestOptions).then(res => res.json()).then(res => {\n      if (res.success) {\n        dispatch({\n          type: \"success\",\n          value: true\n        });\n      } else dispatch({\n        type: \"fail\",\n        value: true\n      });\n    }).catch(error => dispatch({\n      type: \"fail\",\n      value: true\n    })).finally(() => {\n      dispatch({\n        type: \"loading\",\n        value: false\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Container, {\n      containerSize: \"myContainer--small\",\n      children: \"Sign Up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MyDiv, {\n      breakPoint: 7,\n      children: [loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 23\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(MyModal, {\n          show: success,\n          handleOnClick: handleCloseMyModal,\n          variant: \"success\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Congrats! Your account has created!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(MyModal, {\n          show: fail,\n          handleOnClick: handleCloseMyModal,\n          variant: \"danger\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Oops, sorry,Failed to create a new account. Try again..\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(AccountForm, {\n        form_disable: false,\n        DBuser: user,\n        fetchData: createUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SignUp, \"XvwHBe7LuV+X1pR84yvzKsF2enU=\", false, function () {\n  return [useFetch, useHistory];\n});\n\n_c = SignUp;\nexport default SignUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUp\");","map":{"version":3,"sources":["/Users/jiyechoi/Desktop/KGSA_web/kgsa/frontend/src/components/pages/SignUp.js"],"names":["useReducer","useHistory","CustomContainer","Container","MyModal","AccountForm","initialData","reducer","useFetch","url","MyDiv","SignUp","fetchData","success","fail","loading","dispatch","user","firstname","lastname","username","password","email","phone_number","major","history","handleCloseMyModal","push","type","value","createUser","myHeaders","Headers","append","requestOptions","method","headers","body","JSON","stringify","redirect","fetch","then","res","json","catch","error","finally"],"mappings":"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","sourcesContent":["import {useReducer} from 'react';\nimport { useHistory } from 'react-router';\nimport { CustomContainer as Container } from '../CustomContainer';\nimport MyModal from '../MyModal';\nimport AccountForm from '../AccountForm';\nimport { initialData, reducer } from '../../services/AlertHelper';\nimport {useFetch} from '../../services/UseAPIs';\nimport {url} from '../../services/config';\nimport MyDiv from '../MyDiv';\n\nconst SignUp =()=>{\n    const fetchData = useFetch();\n    const [{success, fail, loading}, dispatch] = useReducer(reducer, initialData)\n    const user = {\n        firstname : \"\",\n        lastname : \"\",\n        username : \"\",\n        password : \"\",\n        email : \"\",\n        phone_number : null,\n        major : \"\",\n    };\n    const history = useHistory();\n    \n    const handleCloseMyModal =()=>{\n        if(success){\n            history.push('/login')\n        }\n        dispatch({type:'success', value:false})\n        dispatch({type:'fail', value:false })\n    }\n    const createUser = async (user)=>{\n        dispatch({type:'loading', value:true})\n\n        var myHeaders = new Headers();\n        myHeaders.append(\"Content-Type\", \"application/json\");\n\n        var requestOptions = {\n            method : 'POST',\n            headers : myHeaders,\n            body : JSON.stringify(user),\n            redirect : 'follow'\n        };\n        \n        fetch(url+'signup', requestOptions)\n        .then(res=>res.json())\n        .then(res=>{\n            if(res.success){\n                    dispatch({type:\"success\", value:true})\n            }\n            else dispatch({type:\"fail\", value:true})\n        })\n        .catch(error => dispatch({type:\"fail\", value:true}))\n        .finally(()=>{\n            dispatch({type:\"loading\", value:false})\n        })\n        \n    }\n\n    return (\n        <Container>\n            <Container containerSize=\"myContainer--small\">Sign Up</Container>\n            <MyDiv breakPoint={7}>\n            {loading? <div>loading...</div>:\n                    <>\n                        <MyModal show={success} handleOnClick={handleCloseMyModal} variant='success'>\n                            <p>Congrats! Your account has created!</p>\n                        </MyModal>\n                        <MyModal show={fail} handleOnClick={handleCloseMyModal} variant='danger'>\n                            <p>Oops, sorry,Failed to create a new account. Try again..</p>\n                        </MyModal>\n                    </>\n            }                \n            <AccountForm form_disable={false} DBuser={user} fetchData={createUser}/>\n            </MyDiv>\n        </Container>\n\n    )\n}\n\nexport default SignUp;"]},"metadata":{},"sourceType":"module"}